8. http2 화 되는 세상


http2 가 보급 하면 세상은 어떻게되는 것입니다. 원래 보급하는 것입니까?



8.1 http2 는 일반인들에게 어떤 영향을 미칠 까요?
http2 아직 널리 배포 되지 않으며 사용 되지 않습니다. 우리는 앞으로 어떻게 될 것인가 자신감 여기서 말할 수 없습니다. 우리는 SPDY 가 어떻게 사용되고 있는지 보고 왔습니다. 경험과 다른 과거 및 현재 의 실험 을 바탕으로 추측 과 계산 을 할 수 있습니다.

http2 네트워크 왕복 횟수를 줄일 수 있습니다. 헤드 오브 라인 블로킹 딜레마 를 다중화 및 불필요한 스트림 을 빨리 버리는 하여 완전히 회피 합니다.


오늘 가장 샤드 가 많이 되는 사이트 보다 많은 동시 스트림 을 사용할 수 있습니다.


우선 순위 를 스트림 에 적절하게 적용 하는 것으로, 클라이언트 는 중요한 데이터 를 그다지 중요하지 않은 데이터 전에 받을 수있는 가능성 이 높아집니다. 이들을 종합적으로 보면 빠른 페이지 로드 , 더 레스 의 web 사이트 를 실현할 수있는 가능성이 높다고 말할 수 있습니다. 단도직입 적으로 말해 , 더 나은 web 의 경험 으로 이어질 것입니다.


얼마나 빨라지 는지, 또 어느 정도 개선 할 것인지 등 은 아직 알 수 없습니다. 우선 이 기술 은 아직 초기 단계 이며, 이러한 프로토콜이 제공하는 능력 을 남김없이 소진 클라이언트 와 서버 구현 은 아직 없습니다.



8.2 http2 는 web 개발 에 어떤 영향 을 미칩니 까 ?

이 몇 년 에 web 개발자 및 web 개발 환경 은 트릭과 도구 를 많이 끌어 오고 HTTP 1.1 의 문제를 해결 하고 왔습니다. 내가 이 문서 의 처음 http2 의 정당성 의 증거로서 그 중 일부 를 소개 한 것을 기억하십시오.

도구 와 개발자 가 오늘 아무 생각 없이 사용하고있는 이러한 대안 의 대부분은 아마 http2 의 성능 에 악영향 을 주거나 적어도 http2 훌륭한 능력 을 남김없이 다룰 ​​수 없다는  것입니다. 스 라이팅 과 인 라이닝 은 대부분 의 경우 http2 는 해서는 없습니다. 샤드 도 http2 에는 아마 좋지 않은 결과 가 될 것입니다 . 이란 http2 은 적은 연결 수 에서 혜택 을 얻을 때문입니다.
여기 에서 문제 는 물론 web 사이트 와 web 개발자는 적어도 단기간 는 HTTP 1.1 과 http2 클라이언트 모두 에 대한 개발 과 배포 를 해야 할 것입니다. 모든 사용자에게 최고의 성능 을 제공 하는 것은 두 가지 프런트 엔드 제공 없이는 쉽지 않습니다.

이 단지 를 취해 봐도 http2 의 잠재력 을 완전히 발휘 될 때까지 시간이 좀 걸릴 나는 생각 하고 있습니다.


8.3 . http2 구현
특정 구현에 이 문서 만지는 것은 물론 합리적인 일이 없고, 실패 하는 것은 눈 에 보이고 있습니다. 조금 시간이 지나면 오래된 버립니다. 그런 것은 하지 않고 , 내가 넓은 관점 에서 상황 을 설명 하기로 하고 , 독자 는 구현 의 목록 을 참조 하실 수 있습니다.

일찍부터 많은 구현 이 존재 하고 있고, http2 작업 중에도 증가하고 왔습니다. 이 글을 쓰는 시간 에서 40 개 이상의 구현 이 목록에 있으며, 그들 대부분은 최종 버전 을 구현하고 있습니다.

8.3.1 브라우저

Firefox는 최신 초안 에 가장 빠르게 추종 해온 브라우저 입니다. Twitter 는 최신 버전으로 추종 서비스 를 http2 에서 제공 합니다. Google 은 2014 년 4 월 부터 Google 서비스 를 제공 하는 테스트 서버 에서 http2 을 지원 하여 2014 년 5 월부터 개발 버전 의 Chrome 에서 http2 지원 을 제공 합니다. 마이크로 소프트 는 차기 Internet Explorer 로 http2 을 지원 한 프리뷰 버전을 공개 했습니다. Safari와 Opera는 http2 에 대응 예정이라고 말하고 있습니다.

8.3.2. 서버
미 많은 서버 가 http2 을 지원 하고 있습니다.

인기있는 Nginx 서버 는 2015 년 9 월 22 일 1.9.5 에서 http2 을 제공 합니다. ( SPDY 모듈 의 교체 가 필요하며 SPDY 모듈 과 http2 의 공존 은 할 수 없습니다. )

Apache 의 httpd 서버 는 2015 년 10 월 9 일 에 발표 된 2.4.17 에서 http2 모듈 mod_http2 이 제공 되고 있습니다.

H2O , Apache Traffic Server , nghttp2 , Caddy , LiteSpeed ​​는 모든 http2 를 사용할 수 있습니다.


8.3.3. 기타

curl 및 libcurl 은 평문 과 TLS 모두 http2 을 지원 하고 있습니다. 여러 TLS 라이브러리 에 대응을하고 있습니다.

Wireshark는 http2 을 지원 하고 있습니다. http2 의 네트워크 트래픽 을 분석 하기위한 완벽한 도구 입니다.

8.4 . http2 대한 일반적인 비판

이 프로토콜 의 개발 논의 는 전후 했습니다. 물론 이 프로토콜 은 완전히 실수 라고 믿고 있는 사람도 분명 있었습니다. 나는 자주 비판 의 몇 가지를 언급 ​​하고 그에 대한 답변 을 말하고 싶습니다 .

8.4.1 " 프로토콜 은 Google에 의해 만들어진 "

세계는 또한 Google 에 따라 또는 지배 되어가는 것을 시사하는 변종 비판도 있습니다. 이 프로토콜 은 지난 30 년간 개발 된 프로토콜 과 같은 방법으로 IETF에 의해 개발 되었습니다 . 그러나 우리는 SPDY 의 Google 의 훌륭한 일 을 인정 하고 있습니다. 그것은 새로운 프로토콜을 배포 할 수 있다는 것을 증명 했을뿐 아니라 이를 통해 어떤 효과를 얻을 수 있는지 를 나타내는 수치 도 제공 했습니다.

Google에서 공식적으로 발표 한 바에 따르면, SPDY 와 NPN 을 Chrome 에서 2016 년 에 제거하고 서버 도 HTTP / 2 로 이행 해가는 것을 서두를 것입니다.

8.4.2 "브라우저 만 이득을 보는 프로토콜이다"

이것은 어떤 의미 사실입니다. http2의 개발을 뒤에서 견인 한 주요 것들 중 하나는 HTTP 파이프 라이닝을 수정하는 것입니다. 당신의 유스 케이스가 파이프 라이닝을 필요로하지 않는다면, http2 그다지 큰 효력이 없을지도 모릅니다. 이것 만이 프로토콜의 개선 사항은 아니지만, 그러나 큰 개선 사항 중 하나입니다.

서비스가 1 연결에서 다중화 된 스트림이 가지고 진정한 힘과 능력을 이해하자마자, 우리는 더 많은 응용 프로그램이 http2을 사용하는 것을 보게 될 것입니다.

작은 REST API와 간단한 HTTP 1.x 프로그램의 유스 케이스는 http2로 전환해도 큰 이점을 얻을 수 없습니다. 뿐만 아니라 대부분의 사용자에게 http2이 가져다 단점은 거의 없을 것입니다.


8.4.3 " 프로토콜 은 대규모 사이트 에서만 유용하지 "

그런 것은 없습니다. 다중화 능력 은 지리적으로 광범위하게 분산 하지 않은 작은 사이트 이어 경향 지연 의 큰 연결 의 경험을 크게 향상 시키는 데 기여할 것입니다. 대규모 사이트 는 대부분의 경우 벌써 빠르고 더 분산 하고 짧은 왕복 시간 을 사용자에게 제공 합니다.


8.4.4 " TLS 에 의해 느려질 "

이것은 어느 정도 사실 이라고 말할 수 있습니다. TLS 핸드 셰이크 는 좀더 많은 시간 이 걸립니다. 그러나 TLS 에 필요한 왕복 을 줄이는 시도 가 지금 까지 있었고 현재 도 진행 중입니다. 통신 거리에서 평문 이 아니라 TLS를 사용 하는 오버 헤드 는 무시할 수 없고 더 많은 CPU와 전원이 동일한 트랙 피 클 패턴 의 평문 에 비해 사용되게 됩니다. 그것이 얼마나 에 어느 정도 의 영향력 을 갖는지 에 대해 의견이나 측정 결과 에 달려 있습니다. 유용한 정보 소스 의 예로 istlsfastyet.com 를 참조 하십시오.


전화 회사 나 다른 네트워크 사업자, 예를 들어 ATIS 오픈 Web 얼라이언스 는 위성 이나 비행기 같은 곳 에서 빠른 web 환경을 제공 하기 위해 캐싱 , 압축, 기타 제반 기술 이 필요하며, 이를 위해서는 평문 의 토랏휘쿠 이 필요하다고 말하고 있습니다. http2 TLS를 필수로하고 있는 것은 아니므로 더 이상 논의 를 복잡하게 해서는 없습니다.

많은 인터넷 사용자 는 TLS가 널리 쓰이는 것을 희망하고 있으며, 우리는 사용자 의 개인 정보를 보호 해야합니다.

실험 에서는 TLS를 사용하면 새로운 프로토콜 을 80 번 포트 로 구현 하는 것보다 높은 성공률 이 있음을 보여줍니다 . 라는 것은 수없이 중계기 이 세계에 존재 하고 80 번 포트 를 통과 한다면 HTTP 1.1 이라고 믿고 가끔 HTTP로 보일 수도 있기 때문입니다 만, 방해 하기 때문입니다.

마지막으로, http2 1 연결 에 다중화 된 스트림 의 혜택 은 일반 브라우저 의 유스 케이스 에서는 TLS 핸드 쉐이크 의 회수가 감소 되게 HTTP 1.1 사용 HTTPS 보다 빠를 수 도 있습니다.

8.4.5 " ASCII 가 아닌 된다는 것은 심각한 문제 다 "

예, 우리는 평문 프로토콜 을 볼 수 있다는 것을 선호합니다. 왜냐하면 디버깅 및 추적 이 용이하게 되기 때문입니다. 그러나 텍스트 기반 의 프로토콜 은 오류 를 유발 하기 쉽고, 더 퍼스 에서 문제 를 일으 킵니다.

정말 바이너리 프로토콜 을 사용할 수 없다고 한다면, HTTP 1.x 의 TLS 및 압축 도 취급하지 못했던 것입니다 만, 이들은 오랫동안 우리 와 함께 있어 사용되어 온 것입니다.

8.4.6 " HTTP 1.1 보다 빠르지 않다 "

이 내용은 물론 빠르다는 것이 무엇 을 의미 하고 어떻게 측정 할 것인지 논의 해야 없지만, SPDY 시절부터 많은 테스트 가 이루어지고 있어 빠른 페이지 로딩 을 증명 하고 있습니다 ( 예를 들어, 워싱턴 대학 의 사람들 에 의한 " How Speedy is SPDY ? ", Hervé Servy 에 따르면 " Evaluating the Performance of SPDY - enabled Web Servers "). 이러한 실험 은 http2 에서도 마찬가지로 반복 되어 왔습니다. 나는 더 많은 이러한 테스트 나 실험 이 공개 될 것을 기대하고 있습니다. httpwatch.com 에 의한 최초 의 기본적인 테스트 는 HTTP / 2 가 그 약속을 이행 하고 있다는 것을 시사하고 있습니다

8.4.7 . " 이것은 계층 침해 다 "

진심으로 그렇게 생각하고 있습니까? 레이어 는 세계적인 종교 가 만질 수없는 신성한 기둥 은 없습니다. 우리 가 http2 의 개발 에 즈음하여 회색 영역에 발을 들여 놓은 때는 주어진 제약 조건 내에서 효율이 좋은 프로토콜 을 만들 겠다는 의사를 가지고 있는 것이 었습니다.

8.4.8 " HTTP 1.1 의 약점 중 일부는 수정 되지 "

이것은 사실입니다. HTTP 1.1 의 패러다임 을 유지한다는 목적 을 따라 일부 이전 HTTP 기능 은 남아 있었습니다. 자주 사용되는 또 보고 싶지도 않다 cookie 및 authorization 헤더 등이 있습니다 . 그러나 이러한 패러다임 을 유지 한 덕분에 기본적인 부분 을 완전히 다시 작성 하는 업그레이드 머리 아찔한 같은 방대한 작업 없이 배포 할 수있는 프로토콜 을 얻었습니다. http2 은 기본적으로 새로운 레이어 중 하나입니다.


8.5. http2 널리 보급 하는가?

답변은 시기상조이지만, 나름대로 추측과 예측을하고 싶다고 생각합니다.

반대론자는 보급이 시작하는 데 수십 년이 걸릴 새로운 프로토콜의 예로 이런 것입니다. "IPv6가 무엇을 이루어 왔는지 봐라"라고. 그러나 http2는 IPv6가 없습니다. 그것은 TCP에서 실행 일반 HTTP 업그레이드 메커니즘이나 포트 번호 그리고 TLS 등을 사용합니다. 대부분의 라우터와 방화벽을 변경할 필요가 없습니다.

Google은 SPDY 통해 단기간에 새로운 이러한 프로토콜이 배포되어 브라우저와 서버의 여러 구현간에 사용할 수 있다는 것을 증명했습니다. 인터넷에서 오늘 SPDY를 지원하는 서버의 수는 1 %의 영역이지만, 이러한 서버가 취급하는 데이터의 양은 훨씬 큽니다. 오늘의 몇 가지 매우 인기있는 web 사이트는 SPDY를 지원하고 있습니다.


http2 는 SPDY 와 기본적으로 동일한 패러다임 을 가지고 있지만, IETF 프로토콜 이기 때문에 더 널리 배포 되는 것이라고 나는 생각 합니다. SPDY 의 데뿌로멘토 는 " Google 의 프로토콜 " 이라는 오명 에 따라 약간 축소 기미가 보입니다.

유명한 브라우저 도 출시 를 앞두고 있습니다. Firefox, Chrome , Safari , Internet Explorer Opera 의 대표자들은 http2 를 지원하는 브라우저 를 출하한다고 표명하고 있으며, 실제로 움직이는 구현 을 세계에 보여줍니다 .

Google, Twitter, Facebook 등 거대한 서버 사업자 도 http2 을 곧 지원할 예정 입니다. 우리는 Apache HTTP 서버 와 Nginx 같은 인기있는 서버 구현 에 http2 가 구현 되는 것을 바라고 있습니다. H2O 는 엄청나게 빠른 HTTP 서버 에서 http2 을 지원 하고 그 잠재력을 보여줍니다 .

HAProxy , Squid , Varnish 같은 거대한 프록시 업체 는 http2 지원 의사 를 보여줍니다 .

2015 년 전반에 걸쳐 HTTP / 2 의 트래픽 이 증가 하고 있습니다. 9 월 초 에서 Firefox 40 에서 의 사용률 은 HTTP 전체 중 13 %, HTTPS로 한정 하면 27 %였다. Google 은 18 % 의 트래픽 이 http2 이었다고 합니다. Google 은 다른 새로운 프로토콜 의 실험 도 동시에 실시하고있다 ( 12.1 QUIC 를 참조하십시오 ) 때문에 http2 의 사용 비율은 낮게 나와 버리는 것에주의 하십시오.

